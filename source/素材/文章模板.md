---
title: JVM基础（二）：			#标题
date: 2020/8/1 00:00:00 						#建立日期
sticky:  #置顶参数
tags:	#标签
 - jvm
 - java
					
categories:	#分类
 - Java
 - JVM

updated: 					#更新日期
author: 一只修仙的猿 #作者
toc: true	#是否显示toc
mathjax:  #数学公式

keywords:				#关键词
description:				#文章描述
top_img:					#文章顶部照片
comments: true				#是否显示评论模块
cover:						#文章缩略图
toc_number: true			#是否显示toc_number
auto_open: true				#是否自动打开toc
copyright: true					#显示文章版权模块
copyright_author: 一只修仙的猿		#文章版权作者
copyright_author_href: 			#文章版权作者链接
copyright_url:						#文章版权文章链接
copyright_info:						#文章版权声明文字

katex:
aplayer:
highlight_shrink: true       #代码框是否打开
---

## 前言

很高兴遇见你~ 欢迎阅读我的文章。

在上一篇文章[JVM基础（一）：认识虚拟机](https://blog.csdn.net/weixin_43766753/article/details/109199647)中，介绍了什么是虚拟机，以及字节码class文件。这一篇文章主要讲关于JVM的运行时数据区结构。

我们知道，c/c++在内存上划分为了栈和堆区，栈区存放函数的局部变量等，堆区为用户自主开辟的空间。当开发者需要新建一个对象时，首先需要在堆区中开辟一个空间，再初始化，使用。最后需要自己手动去释放该内存区域。而JVM把这些工作都做好了，当我们需要新建一个对象的时候，只需要一个关键字`new`即可创建一个对象，当我们不再使用这个对象的时候，垃圾回收机制会帮我们自动回收该内存。两种方式各有优势，c/c++对内存有至高无上的权利，同时也意味着自己有更重的责任去管理对象的生命周期；JVM自动管理内存，向开发者屏蔽了直接的内存操作，但是如果对JVM的运行时数据区认识不够，就很容易发生内存泄露、内存溢出等问题。这也是我们需要学习JVM运行时数据区的原因之一。

JVM运行时数据区结构和c/c++有点相似，同样分配了栈区与堆区。具体的结构如下图：

<img src="https://s1.ax1x.com/2020/10/21/BCfZz6.png" width=400 border="0" />

我们的class文件通过类加载系统，被加载到虚拟机中，在虚拟机进行处理。执行引擎负责执行程序，调用方法并执行。本科库接口和本地方法库则为平台相关的一些列方法，例如android的拍照、通知等等。我们的重点在：运行时数据区。其中方法区和堆是进程共享，而虚拟机栈、本地方法栈、程序计数器是线程共享。下面对各个内存区域进行讲解。

## 方法区

> 方法区主要存放类信息、常量、静态变量、即时编译后的代码缓存等

我们的class文件中的类被加载后存放在方法区中。常量，也就是`public final static`类型的变量，以及静态变量均放在这个地方。